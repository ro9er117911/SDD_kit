---
description: 從專案上下文產生法遵依據與系統對應文件（60_law.md），包含適用法規、法規需求對應、法遵控制點與證據留存要求。
---

## 使用者輸入

```text
$ARGUMENTS
```

## 流程總覽

此命令用於定義**法規遵循要求與系統對應措施**,是 Bank Profile 需求對齊層的法遵文件。應在完成風險與資安文件後執行。

## 目標定位

**60_law.md 關注**：
- WHAT-LAW：需遵守什麼法規（法規識別）
- WHY-APPLY：為什麼適用（觸發條件）
- WHAT-REQUIRE：法規要求什麼（條文解讀）
- HOW-COMPLY：系統如何符合（對應措施）
- HOW-PROVE：如何證明遵循（證據留存）

## 執行步驟

### 1. 初始設定與上下文載入

1. **載入相關文件**：
   - `00_meta.md`（專案背景、監理要求）
   - `10_business.md`（業務性質）
   - `30_risk_control.md`（合規風險）
   - `40_infosec.md`（資安法規）
   - 設定 COMPLIANCE_DIR = `$REPO_ROOT/project/compliance`

2. **檢查既有文件**：若存在詢問 yes/no/merge

### 2. 智能問答（8 個問題）

**第 1 層：法規識別 (P0)**

1. **Q1: 主要適用法規**
   ```
   此專案需遵守哪些主要法規？

   **從專案性質推導**：[根據 00_meta.md 與 10_business.md]
   範例：金融業 STR/SAR → 洗錢防制法、個資法、金管會規範

   常見法規類別：
   - [ ] 個人資料保護（個資法、GDPR、PDPA）
   - [ ] 金融監理（洗錢防制法、銀行法、證券交易法）
   - [ ] 資訊安全（資通安全管理法、ISO 27001）
   - [ ] 勞動法規（勞基法 - 若涉及人力資源系統）
   - [ ] 智慧財產權（著作權法、專利法）
   - [ ] 其他：[說明]

   **推導的主要法規**:
   - [法規 1]：[適用原因]
   - [法規 2]：[適用原因]

   請確認或補充適用法規
   ```

2. **Q2: 法規觸發條件**
   ```
   這些法規在什麼情況下適用？

   **從業務流程推導觸發條件**：[根據 20_process.md]

   範例：
   - 個資法：當系統「蒐集、處理、利用」個人資料時
   - 洗錢防制法：當系統「處理可疑交易調查」時
   - 資通安全管理法：當系統屬於「關鍵基礎設施」時

   **推導的觸發點**:
   | 法規 | 觸發條件 | 適用流程步驟 |
   |------|---------|-------------|
   | [法規 1] | [條件] | [步驟] |

   請確認觸發條件（yes/modify）
   ```

**第 2 層：法規需求拆解 (P1)**

3. **Q3: 關鍵法規條文識別**
   ```
   針對主要法規，哪些條文對本專案最關鍵？

   **智能推導（從業務流程匹配常見條文）**:

   範例（洗錢防制法）：
   - 第 7 條：金融機構應建立洗錢防制內部控制程序
     → 系統需：保存調查記錄、可追溯調查過程
   - 第 9 條：確認客戶身分並留存交易紀錄
     → 系統需：記錄客戶識別資料、交易資料保留 5-7 年

   **推導的關鍵條文**:
   - [法規] 第 X 條：[條文摘要]
     → 系統需求：[對應措施]

   請確認關鍵條文或補充（或回答 'consult-lawyer' 建議諮詢律師）
   ```

4. **Q4: 系統對應措施設計**
   ```
   對於識別的法規要求，系統如何實現？

   **從現有文件推導對應措施**：

   範例：
   - 法規要求「調查過程可追溯」
     → 40_infosec.md 已定義：稽核日誌 7 年保留
     → 對應措施：所有操作記錄稽核日誌（含時間戳、操作人員、變更內容）

   - 法規要求「個資保護」
     → 40_infosec.md 已定義：資料加密、存取控制
     → 對應措施：傳輸加密（TLS 1.2+）、靜態加密（AES-256）、RBAC

   **推導的對應措施**:
   | 法規要求 | 既有控制（從 40_infosec.md） | 額外需求 |
   |---------|----------------------------|---------|
   | [要求 1] | [既有控制] | [額外需求或「無」] |

   請確認對應措施（yes/modify）
   ```

**第 3 層：法遵控制點 (P2)**

5. **Q5: 法遵檢核點設計**
   ```
   如何驗證系統符合法規要求？

   **自動生成檢核點**（從法規要求推導）:

   範例：
   - CP-AML-001：STR 個案完整追溯能力
     驗證方式：隨機抽查 10 個案例，查詢原始文本、模型輸出、最終摘要

   - CP-PDPA-001：訓練資料保護措施
     驗證方式：環境隔離測試、存取權限檢查、去識別化驗證

   **生成的檢核點**:
   - [CP-XXX]：[檢核點名稱]
     驗證方式：[如何驗證]

   請確認檢核點或補充（或 'standard' 使用標準檢核）
   ```

6. **Q6: 上線前法遵檢核範圍**
   ```
   哪些檢核點必須在系統上線前完成？

   **從風險等級推導**（高風險 → 上線前必檢）:

   高優先級檢核點（建議上線前完成）：
   - [ ] [CP-XXX]（對應高合規風險）
   - [ ] [CP-XXX]（涉及個資保護）
   - [ ] [CP-XXX]（涉及金融監理）

   中優先級（可上線後補強）：
   - [ ] [CP-XXX]（內部政策遵循）

   請確認上線前檢核範圍（yes/modify）
   ```

**第 4 層：證據留存 (P2)**

7. **Q7: 文件與證據留存需求**
   ```
   法規要求保留哪些文件與證據？保留多久？

   **從法規推導留存需求**:

   常見留存要求：
   - 個資法：個資當事人同意書 → 特定目的消失後 5 年
   - 洗錢防制法：交易記錄、調查記錄 → 7 年
   - 資通安全管理法：系統存取日誌 → 6 個月至 1 年

   **推導的留存需求**:
   | 文件類型 | 法規依據 | 留存期限 | 儲存位置 |
   |---------|---------|---------|---------|
   | [文件 1] | [法規] | [期限] | [位置] |

   **從 20_process.md 推導需留存的資料**:
   - 流程步驟「AI 產生摘要」→ 需留存：模型輸出、最終摘要
   - 流程步驟「人工審核」→ 需留存：審核記錄、修改軌跡

   請確認留存需求（yes/modify）
   ```

**第 5 層：法規變更管理 (P3)**

8. **Q8: 法規變更追蹤機制**
   ```
   如何追蹤法規變更並評估影響？

   常見機制：
   - A：訂閱主管機關電子報 + 季度法規掃描（委請律師）
   - B：參加產業法遵研討會 + 內部法遵會議
   - C：建立法規變更影響評估流程（法規變更 → 影響評估 → 系統變更）
   - D：A + B + C（完整機制）

   **推薦**: D（完整機制）

   請選擇或 'yes' 接受推薦（或 'later' 稍後補充）
   ```

### 3. 自動生成內容

**法規需求對應表生成**：
- 從法規條文自動生成系統需求編號（REQ-[REG]-01, REQ-[REG]-02...）
- 從 40_infosec.md 匹配既有控制措施
- 標註「規劃中」或「已實作」狀態

**法遵控制點生成**：
- 從法規要求自動生成控制點編號（CP-[REG]-001...）
- 分類控制類型（預防/偵測/回應）
- 生成驗證方式建議

**文件留存矩陣生成**：
- 從 20_process.md 的流程步驟識別需留存資料
- 匹配法規留存期限要求
- 推導儲存位置（從 40_infosec.md 的資料分級）

**法遵 RACI 矩陣生成**：
- 從 00_meta.md 的利害關係人生成角色列表
- 自動分配法遵活動責任：
  - 法遵部門 → 法規解讀 (A)、法遵監控 (A)
  - IT 部門 → 系統實作 (R)
  - 業務部門 → 業務流程配合 (C)
  - 稽核部門 → 法遵檢核 (R)

### 4. 整合既有文件

**從 30_risk_control.md 整合合規風險**：
- 合規風險 (R-COMP-XXX) → 對應法遵控制點 (CP-XXX)
- 範例：
  - R-COMP-001「模型輸出直接報送」→ CP-AML-002「防止自動決定報送」

**從 40_infosec.md 整合資安法規要求**：
- 個資法要求 → 已定義於 40_infosec.md 的資料保護措施
- 避免重複，60_law.md 引用 40_infosec.md 的控制

### 5. 法遵報告需求生成

**自動生成報告需求**：

從法規要求推導報告頻率：
- 洗錢防制 → 建議：每月模型使用法遵監控報告
- 個資保護 → 建議：每季個資存取稽核報告
- 內部政策 → 建議：每年法規遵循年度報告

範例報告內容：
- 模型建議被修改率（證明人工審核介入）
- 異常個案數（證明異常偵測有效）
- 法遵檢核點通過率（證明控制措施有效）

### 6. 品質檢查

**完整性檢查**：
- [ ] 至少識別 3 項主要適用法規
- [ ] 每項法規有明確系統需求對應
- [ ] 定義至少 5 個法遵控制點
- [ ] 文件留存要求明確（類型、期限、位置）
- [ ] 法遵 RACI 矩陣完整

**一致性檢查**：
- [ ] 法規要求與 30_risk_control.md 的合規風險對齊
- [ ] 法遵控制點與 40_infosec.md 的資安控制一致
- [ ] 文件留存要求與 60_audit.md 的稽核需求對齊
- [ ] RACI 角色與 00_meta.md 的利害關係人一致

**可執行性檢查**：
- [ ] 每個法遵控制點有明確驗證方式
- [ ] 文件留存技術可行（儲存容量、查詢效能）
- [ ] 法遵報告可自動化產出或有明確手動流程

### 7. 生成 60_law.md

1. 載入模板並填寫所有自動生成內容
2. 插入法規需求對應表、法遵控制點
3. 填入文件留存矩陣、法遵 RACI
4. 生成上線前法遵檢核清單
5. 插入法遵報告需求

### 8. 輸出訊息

```
✅ 法遵依據與系統對應文件已生成

📄 檔案路徑: project/compliance/60_law.md

📊 法遵摘要:
  ✓ 適用法規: [N] 項
    - 金融監理: [X] 項
    - 個資保護: [Y] 項
    - 資訊安全: [Z] 項
  ✓ 法規需求: [M] 個系統需求
  ✓ 法遵控制點: [P] 個
    - 上線前必檢: [X] 個
    - 持續監控: [Y] 個
  ✓ 文件留存: [Q] 種文件類型
    - 7 年保留: [X] 種
    - 5 年保留: [Y] 種

🎯 關鍵法遵要求:
  - [法規 1]: [關鍵要求]
  - [法規 2]: [關鍵要求]

📋 上線前檢核項目:
  - [ ] CP-XXX: [檢核點]（對應 [法規]）
  - [ ] CP-XXX: [檢核點]（對應 [法規]）

⚠️ 需法律諮詢項目:
  - [法規條文]: [疑義說明]

💡 下一步建議:
  1. 與法遵部門確認法規解讀正確性
  2. 與律師確認關鍵條文適用性
  3. 執行 `/speckit.audit` 補充稽核詳細需求
  4. 或執行 `/speckit.specify --from-bank-profile` 產生技術規格
```

## 與其他命令的整合

- **00_meta.md** 的監理要求 → **60_law.md** 的適用法規
- **30_risk_control.md** 的合規風險 → **60_law.md** 的法遵控制點
- **40_infosec.md** 的資安控制 → **60_law.md** 引用（避免重複）
- **60_audit.md** 的稽核需求 ← **60_law.md** 的證據留存要求

## 特殊模式

### 快速模式 (--quick)
- 僅問 4 題（Q1, Q2, Q4, Q7）
- 使用標準法遵控制點模板

### 高合規模式 (--high-compliance)
- 自動選擇最嚴格的法遵要求
- 上線前檢核全部必檢
- 文件留存期限取最長

### 從風險繼承 (--from-risk)
- 從 30_risk_control.md 的合規風險自動識別法規
- 減少問答至 3-4 題

## 案例：STR/SAR 摘要模型

輸入: `/speckit.compliance`

系統推導：
1. **適用法規**:
   - 洗錢防制法（處理可疑交易）
   - 個資法（處理客戶個資）
   - 金管會洗錢防制規範（金融機構義務）
2. **關鍵條文**:
   - 洗錢防制法第 7 條 → 系統需：調查過程可追溯
   - 個資法第 6 條 → 系統需：個資保護措施
3. **法遵控制點**:
   - CP-AML-001：STR 個案完整追溯能力
   - CP-AML-002：防止模型自動決定報送
   - CP-PDPA-001：訓練資料保護措施
4. **文件留存**:
   - 原始 STR 文本：7 年
   - 模型輸出與最終摘要：7 年
   - 操作稽核日誌：7 年
5. **法遵報告**:
   - 每月：模型使用法遵監控報告
   - 每季：個資存取稽核報告
   - 每年：法規遵循年度報告

## 注意事項

1. **法律專業**：複雜法規條文建議諮詢律師
2. **法規變更**：建立法規追蹤機制，避免法規變更後系統未更新
3. **證據留存**：確保技術可行（儲存成本、查詢效能）
4. **法遵優先**：法規要求不可妥協，技術需配合法遵
5. **避免重複**：資安法規要求已在 40_infosec.md，60_law.md 引用即可

