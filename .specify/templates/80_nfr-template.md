# 70_nfr - 非功能需求（Non-Functional Requirements）

> **文件版本**: v1.0.0
> **最後更新**: [YYYY-MM-DD]
> **專案名稱**: [專案名稱]
> **專案代號**: [PROJECT-CODE]

---

## 📋 文件摘要

本文件定義專案的非功能需求，包含效能、可用性、可靠性、維運、安全、擴展性等技術品質要求。

**關鍵產出**：
- 效能與容量需求（回應時間、吞吐量、並行數）
- 可用性與可靠性需求（SLA、RTO/RPO）
- 維運與監控需求（健康檢查、告警、日誌）
- 擴展性與相容性需求（未來成長、系統整合）
- 安全性與合規性需求（資安、法遵）

**前置文件**：
- `10_business.md` - 業務目標（效能期望、使用者數量）
- `20_process.md` - 流程設計（各步驟時間要求）
- `30_risk_control.md` - 風險控制（災難復原需求）
- `40_infosec.md` - 資安需求（安全性 NFR）
- `50_compliance.md` - 法遵需求（合規性 NFR）

**後續文件**：
- `spec.md` - 技術規格（NFR 實作設計）
- `plan.md` - 實作計畫（NFR 實現方案）

---

## 1. 效能需求（Performance）

### 1.1 回應時間需求（Response Time）

**關鍵操作回應時間**：

| NFR 編號 | 操作名稱 | 回應時間要求 | 測量方式 | 適用情境 |
|---------|---------|-------------|---------|---------|
| NFR-PERF-001 | [操作名稱] | < [X] 秒/毫秒 | [如何測量] | [正常/尖峰] |
| NFR-PERF-002 | [操作名稱] | < [X] 秒/毫秒 | [如何測量] | [正常/尖峰] |

**範例（STR/SAR 摘要模型）**：

| NFR 編號 | 操作名稱 | 回應時間要求 | 測量方式 | 適用情境 |
|---------|---------|-------------|---------|---------|
| NFR-PERF-001 | 單筆 STR 摘要生成 | < 5 秒 | 從 API 請求到回應（不含資料查詢） | 正常負載 |
| NFR-PERF-002 | STR 個案資料查詢 | < 2 秒 | 從查詢請求到資料回傳 | 正常負載 |
| NFR-PERF-003 | 分析人員儀表板載入 | < 3 秒 | 頁面完整載入時間 | 正常負載 |
| NFR-PERF-004 | 稽核日誌查詢（單一個案） | < 5 秒 | 從查詢到結果顯示 | 正常負載 |
| NFR-PERF-005 | 稽核日誌查詢（複合條件） | < 30 秒 | 從查詢到結果顯示 | 正常負載 |

**回應時間等級定義**：
- **極快**：< 500 ms（使用者無感知延遲）
- **快**：< 2 秒（可接受的互動延遲）
- **可接受**：< 5 秒（使用者可忍受）
- **慢**：5-30 秒（需顯示進度指示）
- **批次**：> 30 秒（非即時操作，可背景執行）

### 1.2 吞吐量需求（Throughput）

**系統容量需求**：

| NFR 編號 | 容量指標 | 容量要求 | 測量方式 | 時間範圍 |
|---------|---------|---------|---------|---------|
| NFR-CAP-001 | [指標名稱] | [數量] / [單位時間] | [如何測量] | 每日/每小時 |
| NFR-CAP-002 | [指標名稱] | [數量] / [單位時間] | [如何測量] | 每日/每小時 |

**範例**：

| NFR 編號 | 容量指標 | 容量要求 | 測量方式 | 時間範圍 |
|---------|---------|---------|---------|---------|
| NFR-CAP-001 | STR 摘要生成請求數 | 至少 1,000 筆 / 日 | 實際處理成功的請求數 | 每日 |
| NFR-CAP-002 | 並行模型推論請求 | 至少 10 並行請求 | 同時處理的請求數（無明顯延遲） | 瞬時 |
| NFR-CAP-003 | 資料查詢 QPS | 至少 50 queries/sec | 資料庫查詢每秒處理數 | 瞬時 |
| NFR-CAP-004 | 稽核日誌寫入 TPS | 至少 100 transactions/sec | 日誌系統每秒寫入數 | 瞬時 |

### 1.3 資源使用限制

**系統資源上限**：

| 資源類型 | 正常使用率 | 尖峰使用率 | 告警門檻 | 處理方式 |
|---------|-----------|-----------|---------|---------|
| CPU | < 60% | < 80% | > 75% | 自動告警、人工檢視 |
| 記憶體 | < 70% | < 85% | > 80% | 自動告警、考慮擴容 |
| 磁碟空間 | < 70% | < 85% | > 80% | 自動告警、清理或擴容 |
| 網路頻寬 | < 50% | < 70% | > 65% | 自動告警、流量分析 |
| 資料庫連線數 | < 60% pool size | < 80% pool size | > 75% pool size | 自動告警、連線池調整 |

---

## 2. 可用性需求（Availability）

### 2.1 服務可用性目標（SLA）

**系統可用性要求**：

| NFR 編號 | 服務名稱 | 可用性目標 | 適用時段 | 停機容忍時間 |
|---------|---------|-----------|---------|-------------|
| NFR-AVAIL-001 | [服務名稱] | [%] | [時段] | [時間/月 或 年] |
| NFR-AVAIL-002 | [服務名稱] | [%] | [時段] | [時間/月 或 年] |

**範例**：

| NFR 編號 | 服務名稱 | 可用性目標 | 適用時段 | 停機容忍時間 |
|---------|---------|-----------|---------|-------------|
| NFR-AVAIL-001 | STR 摘要系統（核心功能） | 99.5% | 工作時段（09:00-19:00，週一至週五） | 約 5 小時/年 |
| NFR-AVAIL-002 | 模型推論服務 | 99.0% | 工作時段 | 約 10 小時/年 |
| NFR-AVAIL-003 | 稽核日誌系統 | 99.9% | 24×7 | 約 9 小時/年 |
| NFR-AVAIL-004 | 人工摘要功能（降級模式） | 99.9% | 工作時段 | 約 1 小時/年 |

**可用性等級參考**：
- **99.9%（Three Nines）**：約 8.76 小時停機/年
- **99.5%**：約 43.8 小時停機/年
- **99.0%**：約 87.6 小時停機/年

### 2.2 降級與備援機制

**服務降級設計**：

| NFR 編號 | 降級情境 | 降級模式 | 核心功能保留 | 回復策略 |
|---------|---------|---------|-------------|---------|
| NFR-DEGRADE-001 | [情境] | [降級方式] | [保留功能] | [如何回復] |

**範例**：

| NFR 編號 | 降級情境 | 降級模式 | 核心功能保留 | 回復策略 |
|---------|---------|---------|-------------|---------|
| NFR-DEGRADE-001 | 模型服務暫時不可用 | 關閉 AI 輔助功能，保留人工撰寫 | 分析人員可純人工撰寫摘要 | 模型服務恢復後自動啟用 |
| NFR-DEGRADE-002 | 資料庫查詢過慢 | 啟用快取模式，減少即時查詢 | 使用快取資料（可能稍舊） | 資料庫效能恢復後解除快取 |
| NFR-DEGRADE-003 | 稽核日誌系統故障 | 日誌暫存於本地緩衝區 | 業務功能正常，日誌延遲寫入 | 日誌系統恢復後批次補寫 |

---

## 3. 可靠性需求（Reliability）

### 3.1 災難復原需求（Disaster Recovery）

**RTO/RPO 要求**：

| NFR 編號 | 系統/資料 | RTO（復原時間目標） | RPO（復原點目標） | 備份頻率 | 備份保留 |
|---------|---------|-------------------|------------------|---------|---------|
| NFR-DR-001 | [系統/資料] | [時間] | [時間] | [頻率] | [期限] |

**範例**：

| NFR 編號 | 系統/資料 | RTO（復原時間目標） | RPO（復原點目標） | 備份頻率 | 備份保留 |
|---------|---------|-------------------|------------------|---------|---------|
| NFR-DR-001 | STR 摘要服務 | 4 小時 | 0（不得遺失已確認摘要） | 即時同步 | 7 年 |
| NFR-DR-002 | 模型推論服務 | 4 小時 | 可重新產生（無 RPO 要求） | 模型版本控制 | 永久 |
| NFR-DR-003 | 稽核日誌 | 4 小時（查詢功能） | 0（不得遺失任何日誌） | 即時寫入 + 每日備份 | 7 年 |
| NFR-DR-004 | 案件管理資料庫 | 2 小時 | 15 分鐘 | 每 15 分鐘增量備份 | 7 年 |

**RTO/RPO 定義**：
- **RTO (Recovery Time Objective)**：從災難發生到服務恢復的最長容忍時間
- **RPO (Recovery Point Objective)**：可容忍的最大資料遺失時間範圍

### 3.2 資料備份需求

**備份策略**：

| 資料類型 | 備份方式 | 備份頻率 | 保留期限 | 異地備份 | 備份驗證 |
|---------|---------|---------|---------|---------|---------|
| [資料類型] | [方式] | [頻率] | [期限] | 是/否 | [如何驗證] |

**範例**：

| 資料類型 | 備份方式 | 備份頻率 | 保留期限 | 異地備份 | 備份驗證 |
|---------|---------|---------|---------|---------|---------|
| 原始 STR 文本 | 完整備份 + 增量備份 | 每 15 分鐘增量 + 每日完整 | 7 年 | 是 | 每週隨機抽樣還原測試 |
| 最終確認摘要 | 即時同步複製 | 即時 | 7 年 | 是 | 每月完整還原演練 |
| 模型版本與配置 | Git 版本控制 | 每次變更 | 永久 | 是 | 部署前驗證 |
| 稽核日誌 | 即時寫入 + 每日備份 | 即時 + 每日 | 7 年 | 是 | 每季隨機抽樣驗證 |
| 系統配置 | IaC (Infrastructure as Code) | 每次變更 | 永久 | 是 | 自動化測試 |

### 3.3 錯誤處理與重試機制

**錯誤處理策略**：

| NFR 編號 | 錯誤類型 | 處理方式 | 重試策略 | 使用者體驗 |
|---------|---------|---------|---------|-----------|
| NFR-ERR-001 | [錯誤類型] | [處理方式] | [重試策略] | [UX 設計] |

**範例**：

| NFR 編號 | 錯誤類型 | 處理方式 | 重試策略 | 使用者體驗 |
|---------|---------|---------|---------|-----------|
| NFR-ERR-001 | 模型服務暫時無回應 | 自動重試 | 指數退避（1s, 2s, 4s），最多 3 次 | 顯示「正在處理中」，若失敗顯示錯誤訊息與降級選項 |
| NFR-ERR-002 | 資料庫連線失敗 | 自動重連 | 每 5 秒重試，最多 10 次 | 顯示「系統繁忙，請稍候」 |
| NFR-ERR-003 | 日誌寫入失敗 | 本地暫存 | 每分鐘重試一次，直到成功 | 業務功能正常（對使用者透明） |
| NFR-ERR-004 | 模型輸出格式異常 | 記錄錯誤並降級 | 不重試，直接降級為人工模式 | 通知使用者「AI 輔助暫不可用，請手動撰寫」 |

---

## 4. 維運與監控需求（Operability）

### 4.1 監控需求

**必須監控的指標**：

| NFR 編號 | 監控指標 | 監控頻率 | 告警門檻 | 告警對象 | 處理時效 |
|---------|---------|---------|---------|---------|---------|
| NFR-MON-001 | [指標名稱] | [頻率] | [門檻] | [角色] | [時效] |

**範例**：

| NFR 編號 | 監控指標 | 監控頻率 | 告警門檻 | 告警對象 | 處理時效 |
|---------|---------|---------|---------|---------|---------|
| NFR-MON-001 | 模型服務錯誤率 | 每分鐘 | > 5% | IT 值班、模型工程師 | 15 分鐘內回應 |
| NFR-MON-002 | 模型服務逾時比例 | 每分鐘 | > 10% | IT 值班 | 30 分鐘內回應 |
| NFR-MON-003 | API 回應時間（P95） | 每分鐘 | > 10 秒 | IT 值班 | 30 分鐘內回應 |
| NFR-MON-004 | 系統可用性 | 每分鐘 | < 99.5%（滾動 24 小時） | IT 主管、業務主管 | 立即 |
| NFR-MON-005 | 資料庫連線池使用率 | 每分鐘 | > 80% | IT 值班 | 30 分鐘內回應 |
| NFR-MON-006 | 稽核日誌寫入失敗次數 | 每 5 分鐘 | > 10 次 | IT 值班、稽核部門 | 立即 |

### 4.2 健康檢查 API

**健康檢查需求**：

| NFR 編號 | 健康檢查項目 | 檢查方式 | 回應格式 | 用途 |
|---------|-------------|---------|---------|------|
| NFR-HEALTH-001 | [檢查項目] | [方式] | [格式] | [用途] |

**範例**：

| NFR 編號 | 健康檢查項目 | 檢查方式 | 回應格式 | 用途 |
|---------|-------------|---------|---------|------|
| NFR-HEALTH-001 | 模型服務健康狀態 | GET /health 端點 | JSON（status, version, uptime, metrics） | 負載平衡器、監控系統 |
| NFR-HEALTH-002 | 資料庫連線狀態 | 簡單查詢（SELECT 1） | JSON（status, latency） | 健康檢查、自動告警 |
| NFR-HEALTH-003 | 稽核日誌系統狀態 | 嘗試寫入測試日誌 | JSON（status, write_success） | 監控系統 |

**健康檢查回應格式範例**：

```json
{
  "status": "healthy",
  "timestamp": "2025-01-15T10:30:00Z",
  "version": "v1.3.0",
  "uptime_seconds": 86400,
  "checks": {
    "model_service": {
      "status": "healthy",
      "latency_ms": 50,
      "success_rate": 0.98
    },
    "database": {
      "status": "healthy",
      "connection_pool_usage": 0.45
    },
    "audit_log": {
      "status": "healthy",
      "write_success": true
    }
  }
}
```

### 4.3 日誌需求

**應用程式日誌要求**（除稽核日誌外）：

| 日誌類型 | 日誌等級 | 日誌格式 | 保留期限 | 用途 |
|---------|---------|---------|---------|------|
| 應用程式日誌 | INFO, WARN, ERROR | 結構化（JSON） | 30 天 | 問題排查、效能分析 |
| 錯誤日誌 | ERROR, CRITICAL | 結構化（JSON） | 90 天 | 錯誤追蹤、根因分析 |
| 效能日誌 | INFO | 結構化（JSON） | 30 天 | 效能監控、瓶頸分析 |
| 整合日誌 | INFO, ERROR | 結構化（JSON） | 90 天 | 整合問題排查 |

---

## 5. 擴展性需求（Scalability）

### 5.1 水平擴展能力

**擴展性要求**：

| NFR 編號 | 擴展項目 | 擴展方式 | 擴展限制 | 擴展觸發條件 |
|---------|---------|---------|---------|-------------|
| NFR-SCALE-001 | [項目] | [方式] | [限制] | [觸發條件] |

**範例**：

| NFR 編號 | 擴展項目 | 擴展方式 | 擴展限制 | 擴展觸發條件 |
|---------|---------|---------|---------|-------------|
| NFR-SCALE-001 | 模型推論服務 | 水平擴展（增加實例） | 至少支援 10 實例 | CPU > 70% 持續 5 分鐘 |
| NFR-SCALE-002 | API 服務層 | 水平擴展（負載平衡） | 至少支援 5 實例 | 並行請求 > 100 |
| NFR-SCALE-003 | 稽核日誌儲存 | 垂直擴展（增加容量） | 支援至少 10 TB 資料 | 磁碟使用率 > 70% |

### 5.2 未來成長預估

**3 年成長預估**：

| 指標 | 目前 | 1 年後 | 2 年後 | 3 年後 | 設計考量 |
|------|------|--------|--------|--------|---------|
| 每日 STR 個案數 | 1,000 | 1,500 | 2,000 | 3,000 | 確保系統可擴展至 3 倍容量 |
| 並行使用者數 | 20 | 30 | 40 | 50 | API 服務需支援 50+ 並行 |
| 稽核日誌資料量 | 100 GB/年 | 150 GB/年 | 200 GB/年 | 300 GB/年 | 7 年保留需支援 2.1 TB 總容量 |
| 模型版本數 | 2 | 4 | 6 | 10 | 版本管理與回退機制 |

---

## 6. 相容性需求（Compatibility）

### 6.1 系統整合相容性

**整合系統相容性**：

| NFR 編號 | 整合系統 | 整合方式 | 相容性要求 | 版本要求 |
|---------|---------|---------|-----------|---------|
| NFR-COMPAT-001 | [系統名稱] | [整合方式] | [相容性] | [版本] |

**範例**：

| NFR 編號 | 整合系統 | 整合方式 | 相容性要求 | 版本要求 |
|---------|---------|---------|-----------|---------|
| NFR-COMPAT-001 | 案件管理系統 | REST API | 向後相容（API v1.x） | v1.2+ |
| NFR-COMPAT-002 | 稽核日誌系統 | Syslog 協議 | 標準 Syslog 格式 | RFC 5424 |
| NFR-COMPAT-003 | SSO 驗證系統 | SAML 2.0 | 標準 SAML 實作 | SAML 2.0 |

### 6.2 瀏覽器與平台相容性

**前端相容性**（若適用）：

| 平台類型 | 支援版本 | 測試範圍 |
|---------|---------|---------|
| Chrome | 最新版本及前 2 個主要版本 | 完整功能測試 |
| Firefox | 最新版本及前 2 個主要版本 | 完整功能測試 |
| Safari | 最新版本及前 1 個主要版本 | 基本功能測試 |
| Edge | 最新版本及前 2 個主要版本 | 基本功能測試 |
| 行動裝置（iOS） | iOS 15+ | 檢視功能（若有行動版） |
| 行動裝置（Android） | Android 10+ | 檢視功能（若有行動版） |

---

## 7. 安全性與合規性需求（Security & Compliance）

### 7.1 安全性 NFR（整合 40_infosec.md）

**關鍵安全性 NFR**：

| NFR 編號 | 安全性需求 | 實作要求 | 驗證方式 |
|---------|-----------|---------|---------|
| NFR-SEC-001 | 傳輸加密 | TLS 1.2+ | 安全掃描、滲透測試 |
| NFR-SEC-002 | 靜態資料加密 | AES-256 | 資料儲存檢查 |
| NFR-SEC-003 | 密碼強度 | 至少 12 字元，包含大小寫、數字、特殊符號 | 系統設定檢查 |
| NFR-SEC-004 | Session 逾時 | 閒置 30 分鐘自動登出 | 功能測試 |
| NFR-SEC-005 | API 速率限制 | 100 requests/min/user | 負載測試 |

**（詳細安全性需求請參考 40_infosec.md）**

### 7.2 合規性 NFR（整合 50_compliance.md）

**關鍵合規性 NFR**：

| NFR 編號 | 合規性需求 | 實作要求 | 驗證方式 |
|---------|-----------|---------|---------|
| NFR-COMP-001 | 個資法遵循 | 個資加密、存取記錄、當事人同意機制 | 法遵檢核 |
| NFR-COMP-002 | 洗錢防制法遵循 | 稽核軌跡完整、資料保留 7 年 | 法遵檢核 |
| NFR-COMP-003 | 稽核可追溯性 | 所有操作可追溯、日誌不可竄改 | 稽核測試 |

**（詳細合規性需求請參考 50_compliance.md）**

---

## 8. 模型治理需求（Model Governance）

### 8.1 模型版本管理

**模型版本控制 NFR**：

| NFR 編號 | 治理需求 | 實作要求 | 驗證方式 |
|---------|---------|---------|---------|
| NFR-MODEL-001 | 模型版本與配置以 IaC 管理 | Git 版本控制、自動化部署 | Code Review、部署記錄 |
| NFR-MODEL-002 | 模型更新前需完成測試 | UAT 環境測試通過、效能測試通過 | 測試報告、核准記錄 |
| NFR-MODEL-003 | 模型變更需變更審核記錄 | 變更單（CR）+ 核准流程 | 變更管理系統記錄 |
| NFR-MODEL-004 | 模型可回退至前一版本 | 保留至少前 3 個版本、1 分鐘內回退 | 回退演練 |

### 8.2 模型效能監控

**模型品質監控 NFR**：

| NFR 編號 | 監控指標 | 監控頻率 | 告警門檻 | 處理方式 |
|---------|---------|---------|---------|---------|
| NFR-MODEL-QUALITY-001 | 模型信心分數分布 | 每日 | 低信心案件比例 > 20% | 通知模型工程師檢視 |
| NFR-MODEL-QUALITY-002 | 模型建議被修改率 | 每週 | > 50% | 模型效能檢討會議 |
| NFR-MODEL-QUALITY-003 | 模型推論錯誤率 | 每小時 | > 5% | 自動告警、考慮回退 |

---

## 9. 使用性與無障礙需求（Usability & Accessibility）

### 9.1 使用性需求

| NFR 編號 | 使用性需求 | 實作要求 | 驗證方式 |
|---------|-----------|---------|---------|
| NFR-UX-001 | 介面語言 | 繁體中文（主要）+ 英文（可選） | UI 檢視 |
| NFR-UX-002 | 錯誤訊息清晰度 | 使用者可理解的錯誤訊息（非技術術語） | 使用者測試 |
| NFR-UX-003 | 操作回饋 | 所有操作有明確成功/失敗提示 | UI 測試 |
| NFR-UX-004 | 學習曲線 | 新使用者 1 小時內可完成基本操作 | 使用者訓練記錄 |

### 9.2 無障礙需求（若適用）

| NFR 編號 | 無障礙需求 | 實作標準 | 驗證方式 |
|---------|-----------|---------|---------|
| NFR-A11Y-001 | 鍵盤導航 | 所有功能可僅用鍵盤操作 | 無障礙測試 |
| NFR-A11Y-002 | 螢幕閱讀器相容 | ARIA 標籤正確、語意化 HTML | 螢幕閱讀器測試 |
| NFR-A11Y-003 | 色彩對比 | WCAG 2.1 AA 等級 | 對比度檢測工具 |

---

## 10. 品質檢查

### 10.1 完整性檢查

- [ ] 至少定義 15 個 NFR（涵蓋效能、可用性、可靠性、維運、擴展性）
- [ ] 每個 NFR 有明確的測量方式與驗證方式
- [ ] RTO/RPO 需求明確
- [ ] 監控指標與告警門檻完整
- [ ] 擴展性考量未來 3 年成長

### 10.2 一致性檢查

- [ ] 效能需求與 10_business.md 的業務期望對齊
- [ ] RTO/RPO 與 30_risk_control.md 的風險等級一致
- [ ] 安全性 NFR 與 40_infosec.md 一致
- [ ] 合規性 NFR 與 50_compliance.md 一致
- [ ] 監控指標與 30_risk_control.md 的 KRI 對齊

### 10.3 可測試性檢查

- [ ] 每個 NFR 可測試（有明確測量方式）
- [ ] 效能需求有對應的測試場景
- [ ] 可用性目標可透過監控驗證
- [ ] 災難復原需求可透過演練驗證

---

## 11. NFR 測試策略

### 11.1 效能測試

| 測試類型 | 測試場景 | 測試工具 | 通過標準 |
|---------|---------|---------|---------|
| 負載測試 | 模擬正常負載（50 並行使用者） | JMeter / Locust | 所有 NFR-PERF-* 通過 |
| 壓力測試 | 模擬尖峰負載（100 並行使用者） | JMeter / Locust | 系統不崩潰、回應時間 < 10 秒 |
| 容量測試 | 模擬每日 1,000 筆案件處理 | 自動化測試腳本 | NFR-CAP-001 通過 |
| 穩定性測試 | 連續運行 24 小時 | 監控系統 | 無記憶體洩漏、無效能衰減 |

### 11.2 可用性測試

| 測試類型 | 測試場景 | 測試方式 | 通過標準 |
|---------|---------|---------|---------|
| SLA 驗證 | 監控 1 個月可用性 | 監控系統統計 | 達到 NFR-AVAIL-* 目標 |
| 降級測試 | 模擬模型服務故障 | 手動關閉服務 | 系統自動降級、核心功能可用 |
| 災難復原演練 | 模擬資料庫故障 | 災難復原程序 | RTO < 4 小時、RPO < 15 分鐘 |

### 11.3 安全性測試

| 測試類型 | 測試範圍 | 測試工具 | 頻率 |
|---------|---------|---------|------|
| 漏洞掃描 | 已知漏洞（OWASP Top 10） | OWASP ZAP / Burp Suite | 每季 |
| 滲透測試 | 模擬攻擊 | 專業資安公司 | 每年 |
| 安全配置檢查 | TLS 版本、加密強度 | SSL Labs / Nmap | 每月 |

---

## 12. NFR 優先級與取捨

### 12.1 NFR 優先級

| 優先級 | NFR 類別 | 理由 | 不可妥協的 NFR |
|-------|---------|------|--------------|
| P0（最高） | 可用性、資料可靠性、合規性 | 涉及法規、業務連續性 | NFR-AVAIL-004, NFR-DR-001, NFR-COMP-* |
| P1（高） | 效能、安全性、稽核性 | 影響使用者體驗、資料保護 | NFR-PERF-001, NFR-SEC-*, NFR-AUDIT-* |
| P2（中） | 擴展性、監控、使用性 | 影響長期維運 | NFR-SCALE-001, NFR-MON-* |
| P3（低） | 無障礙、多語言 | Nice to have | - |

### 12.2 NFR 取捨原則

**當資源或技術限制導致 NFR 衝突時**：

1. **合規性 > 效能**：法規要求不可妥協，效能可適度降低
   - 範例：稽核日誌完整性優先於寫入效能

2. **可用性 > 功能豐富度**：核心功能可用優先於進階功能
   - 範例：模型服務故障時，保留人工撰寫功能

3. **安全性 > 使用便利性**：資料保護優先於操作便利
   - 範例：強制 MFA 即使增加登入步驟

4. **資料可靠性 > 成本**：資料不可遺失，備份成本不可省
   - 範例：7 年日誌保留不因儲存成本而縮短

---

## 13. 會議記錄

### 會議 01 - NFR 需求確認會議

**日期**: [YYYY-MM-DD]
**參與者**: [IT 部門、業務部門、法遵部門、稽核部門]

**討論議題**：
1. 確認效能與容量需求
2. 討論 RTO/RPO 要求
3. 確認監控與告警機制
4. 討論 NFR 優先級與取捨原則

**決議事項**：
- [ ] [決議 1]
- [ ] [決議 2]

**待辦事項**：
- [ ] [待辦 1] - 負責人：[姓名] - 期限：[日期]
- [ ] [待辦 2] - 負責人：[姓名] - 期限：[日期]

---

## 附錄

### A. NFR 完整清單

[所有 NFR 的詳細清單，包含編號、需求描述、測量方式、驗證方式、優先級]

### B. NFR 測試計畫

[詳細的 NFR 測試計畫，包含測試場景、測試資料、測試腳本、通過標準]

### C. NFR 術語對照表

| 術語 | 定義 | 英文對照 |
|------|------|---------|
| SLA | 服務水準協議 | Service Level Agreement |
| RTO | 復原時間目標 | Recovery Time Objective |
| RPO | 復原點目標 | Recovery Point Objective |
| QPS | 每秒查詢數 | Queries Per Second |
| TPS | 每秒交易數 | Transactions Per Second |
| P95 | 第 95 百分位數 | 95th Percentile |
| IaC | 基礎設施即程式 | Infrastructure as Code |

---

**文件核准**：

| 角色 | 姓名 | 簽名 | 日期 |
|------|------|------|------|
| IT 部門主管 | [姓名] | [簽名] | [日期] |
| 業務部門主管 | [姓名] | [簽名] | [日期] |
| 專案經理 | [姓名] | [簽名] | [日期] |
