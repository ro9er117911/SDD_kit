---

description: "功能實作的任務列表模板"
---

# 任務：[FEATURE NAME]

**輸入**：來自 `/specs/[###-feature-name]/` 的設計文件
**先決條件**：plan.md（必需）、spec.md（使用者故事必需）、research.md、data-model.md、contracts/

**測試**：下方範例包含測試任務。測試為選用 - 僅在功能規格明確要求時才包含。

**組織方式**：任務依使用者故事分組，以便獨立實作和測試每個故事。

## 格式：`[ID] [P?] [Story] 描述`

- **[P]**：可平行執行（不同檔案、無依賴關係）
- **[Story]**：此任務所屬的使用者故事（例如：US1、US2、US3）
- 在描述中包含確切的檔案路徑

## 路徑慣例

- **單一專案**：`src/`、`tests/` 位於儲存庫根目錄
- **網頁應用程式**：`backend/src/`、`frontend/src/`
- **行動裝置**：`api/src/`、`ios/src/` 或 `android/src/`
- 下方顯示的路徑假設為單一專案 - 根據 plan.md 結構調整

<!--
  ============================================================================
  重要：下方的任務僅為示範範例。

  /speckit.tasks 指令必須根據以下內容替換為實際任務：
  - spec.md 中的使用者故事（及其優先級 P1、P2、P3...）
  - plan.md 中的功能需求
  - data-model.md 中的實體
  - contracts/ 中的端點

  任務必須依使用者故事組織，以便每個故事可以：
  - 獨立實作
  - 獨立測試
  - 作為 MVP 增量交付

  請勿在生成的 tasks.md 檔案中保留這些範例任務。
  ============================================================================
-->

## 第 1 階段：設置（共用基礎設施）

**目的**：專案初始化和基本結構

- [ ] T001 根據實作計劃建立專案結構
- [ ] T002 使用 [framework] 依賴項初始化 [language] 專案
- [ ] T003 [P] 配置程式碼檢查和格式化工具

---

## 第 2 階段：基礎（阻塞先決條件）

**目的**：在實作任何使用者故事之前必須完成的核心基礎設施

**⚠️ 關鍵**：在此階段完成前，不能開始任何使用者故事的工作

基礎任務範例（根據您的專案調整）：

- [ ] T004 設置資料庫結構描述和遷移框架
- [ ] T005 [P] 實作驗證/授權框架
- [ ] T006 [P] 設置 API 路由和中介軟體結構
- [ ] T007 建立所有故事依賴的基礎模型/實體
- [ ] T008 配置錯誤處理和日誌記錄基礎設施
- [ ] T009 設置環境配置管理

**檢查點**：基礎就緒 - 現在可以開始平行實作使用者故事

---

## 第 3 階段：使用者故事 1 - [標題]（優先級：P1）🎯 MVP

**目標**：[此故事交付內容的簡要描述]

**獨立測試**：[如何驗證此故事獨立運作]

### 使用者故事 1 的測試（選用 - 僅在要求測試時）⚠️

> **注意：先撰寫這些測試，確保在實作前它們會失敗**

- [ ] T010 [P] [US1] tests/contract/test_[name].py 中 [endpoint] 的合約測試
- [ ] T011 [P] [US1] tests/integration/test_[name].py 中 [user journey] 的整合測試

### 使用者故事 1 的實作

- [ ] T012 [P] [US1] 在 src/models/[entity1].py 建立 [Entity1] 模型
- [ ] T013 [P] [US1] 在 src/models/[entity2].py 建立 [Entity2] 模型
- [ ] T014 [US1] 在 src/services/[service].py 實作 [Service]（依賴 T012、T013）
- [ ] T015 [US1] 在 src/[location]/[file].py 實作 [endpoint/feature]
- [ ] T016 [US1] 新增驗證和錯誤處理
- [ ] T017 [US1] 為使用者故事 1 的操作新增日誌記錄

**檢查點**：此時，使用者故事 1 應完全可運作且可獨立測試

---

## 第 4 階段：使用者故事 2 - [標題]（優先級：P2）

**目標**：[此故事交付內容的簡要描述]

**獨立測試**：[如何驗證此故事獨立運作]

### 使用者故事 2 的測試（選用 - 僅在要求測試時）⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].py 中 [endpoint] 的合約測試
- [ ] T019 [P] [US2] tests/integration/test_[name].py 中 [user journey] 的整合測試

### 使用者故事 2 的實作

- [ ] T020 [P] [US2] 在 src/models/[entity].py 建立 [Entity] 模型
- [ ] T021 [US2] 在 src/services/[service].py 實作 [Service]
- [ ] T022 [US2] 在 src/[location]/[file].py 實作 [endpoint/feature]
- [ ] T023 [US2] 與使用者故事 1 的元件整合（如需要）

**檢查點**：此時，使用者故事 1 和 2 應都能獨立運作

---

## 第 5 階段：使用者故事 3 - [標題]（優先級：P3）

**目標**：[此故事交付內容的簡要描述]

**獨立測試**：[如何驗證此故事獨立運作]

### 使用者故事 3 的測試（選用 - 僅在要求測試時）⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].py 中 [endpoint] 的合約測試
- [ ] T025 [P] [US3] tests/integration/test_[name].py 中 [user journey] 的整合測試

### 使用者故事 3 的實作

- [ ] T026 [P] [US3] 在 src/models/[entity].py 建立 [Entity] 模型
- [ ] T027 [US3] 在 src/services/[service].py 實作 [Service]
- [ ] T028 [US3] 在 src/[location]/[file].py 實作 [endpoint/feature]

**檢查點**：所有使用者故事現在應都能獨立運作

---

[依需要新增更多使用者故事階段，遵循相同模式]

---

## 第 N 階段：優化與跨領域關注點

**目的**：影響多個使用者故事的改進

- [ ] TXXX [P] 更新 docs/ 中的文件
- [ ] TXXX 程式碼清理和重構
- [ ] TXXX 所有故事的效能優化
- [ ] TXXX [P] tests/unit/ 中的額外單元測試（如要求）
- [ ] TXXX 安全性加固
- [ ] TXXX 執行 quickstart.md 驗證

---

## 依賴關係與執行順序

### 階段依賴關係

- **設置（第 1 階段）**：無依賴 - 可立即開始
- **基礎（第 2 階段）**：依賴設置完成 - 阻塞所有使用者故事
- **使用者故事（第 3+ 階段）**：都依賴基礎階段完成
  - 之後使用者故事可平行進行（如有人力配置）
  - 或依優先級順序執行（P1 → P2 → P3）
- **優化（最終階段）**：依賴所有期望的使用者故事完成

### 使用者故事依賴關係

- **使用者故事 1（P1）**：可在基礎（第 2 階段）後開始 - 不依賴其他故事
- **使用者故事 2（P2）**：可在基礎（第 2 階段）後開始 - 可能與 US1 整合但應可獨立測試
- **使用者故事 3（P3）**：可在基礎（第 2 階段）後開始 - 可能與 US1/US2 整合但應可獨立測試

### 每個使用者故事內部

- 測試（如包含）必須先撰寫並在實作前失敗
- 模型在服務之前
- 服務在端點之前
- 核心實作在整合之前
- 故事完成後再進行下一個優先級

### 平行機會

- 所有標記 [P] 的設置任務可平行執行
- 所有標記 [P] 的基礎任務可平行執行（在第 2 階段內）
- 基礎階段完成後，所有使用者故事可開始平行執行（如團隊容量允許）
- 使用者故事的所有標記 [P] 的測試可平行執行
- 故事內標記 [P] 的模型可平行執行
- 不同使用者故事可由不同團隊成員平行處理

---

## 平行範例：使用者故事 1

```bash
# 一起啟動使用者故事 1 的所有測試（如要求測試）：
Task: "tests/contract/test_[name].py 中 [endpoint] 的合約測試"
Task: "tests/integration/test_[name].py 中 [user journey] 的整合測試"

# 一起啟動使用者故事 1 的所有模型：
Task: "在 src/models/[entity1].py 建立 [Entity1] 模型"
Task: "在 src/models/[entity2].py 建立 [Entity2] 模型"
```

---

## 實作策略

### 優先 MVP（僅使用者故事 1）

1. 完成第 1 階段：設置
2. 完成第 2 階段：基礎（關鍵 - 阻塞所有故事）
3. 完成第 3 階段：使用者故事 1
4. **停止並驗證**：獨立測試使用者故事 1
5. 如就緒則部署/展示

### 漸進式交付

1. 完成設置 + 基礎 → 基礎就緒
2. 新增使用者故事 1 → 獨立測試 → 部署/展示（MVP！）
3. 新增使用者故事 2 → 獨立測試 → 部署/展示
4. 新增使用者故事 3 → 獨立測試 → 部署/展示
5. 每個故事在不破壞先前故事的情況下增加價值

### 平行團隊策略

多位開發人員時：

1. 團隊一起完成設置 + 基礎
2. 基礎完成後：
   - 開發人員 A：使用者故事 1
   - 開發人員 B：使用者故事 2
   - 開發人員 C：使用者故事 3
3. 故事獨立完成和整合

---

## 備註

- [P] 任務 = 不同檔案、無依賴關係
- [Story] 標籤將任務對應至特定使用者故事以便追蹤
- 每個使用者故事應可獨立完成和測試
- 在實作前驗證測試會失敗
- 每個任務或邏輯群組後提交
- 在任何檢查點停止以獨立驗證故事
- 避免：模糊的任務、同一檔案衝突、破壞獨立性的跨故事依賴
